# 翻译@Auto Layout Guide（自动布局指南）

- 原文：[Auto Layout Guide](https://developer.apple.com/library/content/documentation/UserExperience/Conceptual/AutolayoutPG/index.html#//apple_ref/doc/uid/TP40010853)
- 作者：[Apple](https://developer.apple.com/library/content/navigation/)

---

## Getting Started（新手上路）

### Working with Constraints in Interface Builder（在界面编辑器中使用约束）

在界面编辑器中创建约束，有三种方式：按住control拖拽视图，创建约束；使用固定和对齐工具（Pin and Align tools）生成约束；使用界面编辑器自动设置的约束，然后根据需要修改。这些方式各有优缺点。大多数开发者会选择一种自己偏爱的方式，但全部熟悉能够让我们更好的根据需求选择合适的方式。

不管使用哪种方式，都要先从对象库中拖拽视图和控件到画布。根据需要调整它们的大小和位置，这时，界面编辑器会创建一组隐性约束，定义视图的当前尺寸以及相对于父视图左上角的位置。

编译并运行app，可以迅速查看界面原型。但随着开发的进行，需要为视图添加显性约束。绝对不要发布使用隐形约束的app。

为视图添加第一条自定义约束后，系统会自动移除所有相关的隐性约束。此时，由于缺少约束，视图的尺寸和位置无法被正确定义，布局出现歧义。受影响的约束会显示为红色，Xcode会报警告。

别慌。继续添加约束，直至布局完成。一旦我们开始添加约束，就必须创建一个明确，可满足的布局。

更多关于修复布局警告和错误的信息，详见[调试自动布局](https://developer.apple.com/library/content/documentation/UserExperience/Conceptual/AutolayoutPG/TypesofErrors.html#//apple_ref/doc/uid/TP40010853-CH22-SW1)。

#### Control-Dragging Constraints（拖拽约束）

要在两个视图之间创建约束，按住control，将一个视图拖动至另一个。

![图12]()

随后松开鼠标，会弹出一个灰色菜单，从中选择一个要添加的约束。

![图13]()

界面编辑器能够根据参与约束的元素（视图）以及拖拽的方向，给出一组可供选择的约束。如果沿水平方向拖拽，则可供选择的约束包括视图间的水平距离，以及垂直对齐两个视图。如果沿垂直方向拖拽，则可供选择的约束包括视图间的垂直距离，以及水平对齐两个视图。此外，还有一系列其他可用约束（例如设置相对尺寸）。

>注意
>
>拖拽的对象可以是画布上的视图，也可以是场景对象列表（scene document outline）。后者特别适用于为在画布上找不到的对象添加约束，例如上方或下方布局参照（layout guide）。当向场景对象列表中的对象拖拽时，可用的约束不再受拖拽方向影响。

界面编辑器根据视图当前的frame创建约束。因此，添加约束前，要将视图移动到合适的位置。只要组合得当，最终获得约束能够符合预期。而且，约束创建后随时都可以进行修改。

通过拖拽，我们可以迅速添加约束；然而，由于约束的值是根据视图当前frame推断而来的，很容易产生偏差。想要更精确的控制布局，约束创建后我们需要逐一检查，也可以使用固定和对齐工具。

等多关于拖拽创建约束的信息，详见自动布局帮助中同拖拽创建约束有关的内容。

#### Using the Stack, Align, Pin and Resolve Tools（使用堆叠，对齐，固定和问题解决工具）

界面编辑器在编辑窗口右下角提供了四个布局工具。它们分别是堆叠，对齐，固定和问题解决工具。

![图14]()

如果想要更精确的创建约束，或一次创建多个约束，可以使用固定和对齐工具。一个额外的好处是，使用这些工具创建约束，不需要提前布置视图。相反，只需要将视图移动至大致位置，添加约束，最后更新frame即可。自动布局会自动更新画布上视图的位置和尺寸。

##### Stack Tool(堆叠工具)

使用堆叠工具能够快速创建堆叠视图。选中画布上一个或多个视图，然后点击堆叠工具。界面编辑器会将选中的视图嵌入堆叠视图中，根据内容调整堆叠视图的尺寸。

>注意
>
>系统